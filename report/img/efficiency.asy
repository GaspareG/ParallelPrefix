import graph;

// picture pic;
real m = 4;
real xsize=160*m, ysize=90*m;
int p;

scale(Log,Log);
size(xsize,ysize,IgnoreAspect);

/***********************************************************************/
////////////////////////////////////// block_STL
real[] p1 = {0.99618077657543,0.665391156462585,0.642446633825944,0.607531055900621,0.540400552486188,0.394405241935484,0.205488445378151,0.102744222689076};
pair[] f1 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f1[i] = (p, p1[i]);
draw(graph(f1),"block\_stl", marker(scale(1.5mm)*polygon(3),grey,FillDraw(gray(0.7)),above=false));

////////////////////////////////////// block_FF
real[] p2 = {0.937125748502994,0.6285140562249,0.55028129395218,0.490288220551378,0.388144841269841,0.257401315789474,0.121657338308458,0.052700700431035};
pair[] f2 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f2[i] = (p, p2[i]);
draw(graph(f2),"block\_ff", marker(scale(1.5mm)*polygon(4),grey,FillDraw(gray(0.7)),above=false));

////////////////////////////////////// block_OMP
real[] p3 = {1.0064308681672,0.669375534644996,0.650998336106489,0.59280303030303,0.546438547486033,0.404183884297521,0.209001068376068,0.104500534188034};
pair[] f3 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f3[i] = (p, p3[i]);

draw(graph(f3),"block\_omp", marker(scale(1.5mm)*polygon(5),grey,FillDraw(gray(0.7)),above=false));

////////////////////////////////////// block_CILK
real[] p4 = {1.00320512820513,0.664261460101868,0.62800963081862,0.361598890942699,0.202510351966874,0.142583819241983,0.085500437062937,0.054099834070797};
pair[] f4 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f4[i] = (p, p4[i]);

draw(graph(f4),"block\_cilk", marker(scale(1.5mm)*polygon(6),grey,FillDraw(gray(0.7)),above=false));
//////////////////////////////////////

/***********************************************************************/
////////////////////////////////////// circuit_STL
real[] p5 = {0.151603216119345,0.144506001846722,0.13923487544484,0.125965872504829,0.102852260778128,0.073988275340393,0.041166877104377,0.016910874827109};
pair[] f5 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f5[i] = (p, p5[i]);
draw(graph(f5),"circuit\_stl", marker(scale(1.5mm)*polygon(3),grey,FillDraw(gray(0)),above=false));

////////////////////////////////////// circuit_FF
real[] p6 = {0.150249615975422,0.136848548443512,0.127943100065402,0.11665175909362,0.09991062308478,0.075941381987578,0.042601263066202,0.01994545269168};
pair[] f6 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f6[i] = (p, p6[i]);
draw(graph(f6),"circuit\_ff", marker(scale(1.5mm)*polygon(4),grey,FillDraw(gray(0)),above=false));

////////////////////////////////////// circuit_OMP
real[] p7 = {0.151353965183752,0.145934352853413,0.135521302390024,0.1292107001321,0.109778338945006,0.084906684027778,0.047666910331384,0.025157536008231};
pair[] f7 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f7[i] = (p, p7[i]);

draw(graph(f7),"circuit\_omp", marker(scale(1.5mm)*polygon(5),grey,FillDraw(gray(0)),above=false));

////////////////////////////////////// circuit_CILK
real[] p8 = {0.147210986736902,0.141885766092475,0.138055751587862,0.113934187536401,0.07376508295626,0.057877218934911,0.039632293354943,0.020793473639456,};
pair[] f8 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f8[i] = (p, p8[i]);

draw(graph(f8),"circuit\_cilk", marker(scale(1.5mm)*polygon(6),grey,FillDraw(gray(0)),above=false));


scale(Log,Log);
xaxis("p",BottomTop,LeftTicks(DefaultFormat,new real[] {1, 2, 4, 8, 16, 32, 64, 128}));

scale(Log,Log);

yaxis("$\epsilon(p)$",LeftRight,RightTicks(DefaultFormat, new real[] { .1, .2, .4, .6, .8, .9, 1} ));

add(currentpicture, legend(),point(SW),10E+10N,UnFill);

// Fit pic to W of origin:
scale(Log,Log);


