import graph;

// picture pic;
real m = 4;
real xsize=160*m, ysize=90*m;
int p;

scale(Log,Log);
size(xsize,ysize,IgnoreAspect);

/***********************************************************************/
////////////////////////////////////// block_STL
real[] p1 = {0.99618077657543,1.33078231292517,2.56978653530378,4.8602484472049,8.646408839779,12.6209677419355,13.1512605042017,13.1512605042017,};
pair[] f1 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f1[i] = (p, p1[i]);
draw(graph(f1),"block\_stl", marker(scale(1.5mm)*polygon(3),grey,FillDraw(gray(0.7)),above=false));

////////////////////////////////////// block_FF
real[] p2 = {0.937125748502994,1.2570281124498,2.20112517580872,3.92230576441103,6.21031746031746,8.23684210526316,7.78606965174129,
6.74568965517241};
pair[] f2 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f2[i] = (p, p2[i]);
draw(graph(f2),"block\_ff", marker(scale(1.5mm)*polygon(4),grey,FillDraw(gray(0.7)),above=false));

////////////////////////////////////// block_OMP
real[] p3 = {1.0064308681672,1.33875106928999,2.60399334442596,4.74242424242424,8.74301675977654,12.9338842975207,13.3760683760684,
13.3760683760684};
pair[] f3 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f3[i] = (p, p3[i]);

draw(graph(f3),"block\_omp", marker(scale(1.5mm)*polygon(5),grey,FillDraw(gray(0.7)),above=false));

////////////////////////////////////// block_CILK
real[] p4 = {1.00320512820513,1.32852292020374,2.51203852327448,2.89279112754159,3.24016563146998,4.56268221574344,5.47202797202797,6.92477876106195};
pair[] f4 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f4[i] = (p, p4[i]);

draw(graph(f4),"block\_cilk", marker(scale(1.5mm)*polygon(6),grey,FillDraw(gray(0.7)),above=false));
//////////////////////////////////////

/***********************************************************************/
////////////////////////////////////// circuit_STL
real[] p5 = {0.151603216119345,0.289012003693444,0.556939501779359,1.00772698003863,1.64563617245005,2.36762481089259,2.63468013468013,2.16459197786999};
pair[] f5 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f5[i] = (p, p5[i]);
draw(graph(f5),"circuit\_stl", marker(scale(1.5mm)*polygon(3),grey,FillDraw(gray(0)),above=false));

////////////////////////////////////// circuit_FF
real[] p6 = {0.150249615975422,0.273697096887023,0.511772400261609,0.933214072748956,1.59856996935649,2.43012422360248,2.72648083623693,2.55301794453507};
pair[] f6 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f6[i] = (p, p6[i]);
draw(graph(f6),"circuit\_ff", marker(scale(1.5mm)*polygon(4),grey,FillDraw(gray(0)),above=false));

////////////////////////////////////// circuit_OMP
real[] p7 = {0.151353965183752,0.291868705706826,0.542085209560097,1.0336856010568,1.75645342312009,2.71701388888889,3.05068226120858,3.2201646090535};
pair[] f7 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f7[i] = (p, p7[i]);

draw(graph(f7),"circuit\_omp", marker(scale(1.5mm)*polygon(5),grey,FillDraw(gray(0)),above=false));

////////////////////////////////////// circuit_CILK
real[] p8 = {0.147210986736902,0.28377153218495,0.552223006351447,0.911473500291205,1.18024132730015,1.85207100591716,2.53646677471637,
2.66156462585034};
pair[] f8 = {(0,0.),(0,0.),(0,0.),(0,0),(0,0),(0,0),(0,0)};
for(int i=0, p=1; i<8; ++i, p *= 2) f8[i] = (p, p8[i]);

draw(graph(f8),"circuit\_cilk", marker(scale(1.5mm)*polygon(6),grey,FillDraw(gray(0)),above=false));
//////////////////////////////////////


scale(Log,Log);
xaxis("p",BottomTop,LeftTicks(DefaultFormat,new real[] {1, 2, 4, 8, 16, 32, 64, 128}));

scale(Log,Log);

yaxis("$s(p)$",LeftRight,RightTicks(DefaultFormat, new real[] { 1, 2, 4, 8, 13} ));

add(currentpicture, legend(),point(SE),10N+10W,UnFill);

// Fit pic to W of origin:
scale(Log,Log);


